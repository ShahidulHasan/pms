<table class="table table-striped bold" style="border: 1px solid ghostwhite;">
    <thead>
    <tr>
        <th>Sl</th>
        <th>Date</th>
        <th>Project</th>
        <th>Item</th>
        <th>Quantity</th>
        <th>Unite Price</th>
        <th>Total</th>
        <th>Status</th>
        <th></th>
    </tr>
    </thead>
    <tbody>

    {% if page == 1 %}{% set i = 0 %}
    {% else %}{% set i = (page * 10) -10 %}
    {% endif %}

    {% for projectcosts in projectcost %}
        {% set i = i + 1 %}
        {% set color = [" "] %}

        {% if projectcosts.status == 0 %}{% set color = color|merge(["red"]) %}
        {% elseif projectcosts.status == 1 %}{% set color = color|merge(["green"]) %}
        {% endif %}

        <tr>
            <td>{{ i }} .</td>
            <td class="col-md-2" style="color: {{ color|join(" ") }}">{{ projectcosts.dateOfCost|date('Y-m-d') }}</td>
            <td class="col-md-2" style="color: {{ color|join(" ") }}">{{ projectcosts.project.projectName | length > 12 ? projectcosts.project.projectName | slice(0, 12) ~ ' ...' : projectcosts.project.projectName }}</td>
            <td class="col-md-2" style="color: {{ color|join(" ") }}">{{ projectcosts.item.itemName | length > 11 ? projectcosts.item.itemName | slice(0, 11) ~ ' ...' : projectcosts.item.itemName }}</td>
            <td class="col-md-1" style="color: {{ color|join(" ") }}">{{ projectcosts.quantity }} {{ projectcosts.item.itemUnit }}</td>
            <td class="col-md-2" style="color: {{ color|join(" ") }}">{{ projectcosts.unitPrice }} Tk / {{ projectcosts.item.itemUnit }}</td>
            <td class="col-md-1" style="color: {{ color|join(" ") }}">{{ projectcosts.lineTotal | default() }}</td>
            <td class="col-md-1"> Details</td>
            {% if projectcosts.status == 0 %}
                <td>
                    <a href="#" data-myvalue="{{ projectcosts.id }}" class="check-by-ajax btn default btn-xs red-stripe"><i
                                class="fa fa-plus"></i> Check</a>
                </td>
                <td>
                    <a href="/project-cost/update/{{ projectcosts.id }}" style="width: 80px;" class="btn default btn-xs blue-stripe"><i
                                class="fa fa-edit"></i> Update</a>
                </td>
            {% endif %}
            {% if projectcosts.status == 1 %}
                <td style=" color: red;">
                    <a href="#" class="btn default btn-xs green-stripe"><i class="fa fa-check"></i> Checked</a>
                </td>
                {% if is_granted("ROLE_SUPER_ADMIN") %}
                    <td>
                        <a href="/project-cost/delete/{{ projectcosts.id }}" class="btn default btn-xs blue-stripe"><i
                                    class="fa fa-edit"></i> Delete</a>
                    </td>
                    <td>
                        <a href="/project-cost/update/{{ projectcosts.id }}" class="btn default btn-xs blue-stripe"><i
                                    class="fa fa-edit"></i> Update</a>
                    </td>
                {% endif %}
            {% endif %}
        </tr>

    {% endfor %}
    </tbody>
</table>
<div class="navigation" style="text-align: right">
    {{ knp_pagination_render(projectcost) }}
</div>

<script type="text/javascript">

    $(".check-by-ajax").click(function () {
        var projectCostId = $(this).data('myvalue');

        $.ajax({
            type: "post",
            url: Routing.generate('cost_ajax_checked'),
            data: "projectCostId=" + projectCostId,
            dataType: 'json',
            success: function (msg) {
                if(msg.responseCode == 202) {
                    var $addLink = $('<div class="alert alert-success alert-dismissable"><button type="button" class="close" data-dismiss="alert" aria-hidden="false"></button><span>Project Cost Successfully Checked</span></div>');
                    $('.projectCostMessege').css('color', 'green').html(msg.project_ajax_add).fadeIn(1000).append($addLink);
                }

                $("#cost-list-div").load("/cost/list")
            }
        });
    });

</script>